version: 2.1

orbs: # declare what orbs we are going to use
  node: circleci/node@5.0.0 # the node orb provides

jobs:
  test:
    docker:
      - image: node:lts
        auth:
          username: tallismgf
          password: $DOCKERHUB_PASSWORD

    steps:
      - checkout
      - node/install-packages

      - run:
          name: Install packages
          command: npm install

      - run: 
          name: Run tests ci
          command: npm run test:ci

      - run: 
          name: Eslint 
          command: npm run eslint 'src/**'

workflows:
  sample:
    jobs:
      - test